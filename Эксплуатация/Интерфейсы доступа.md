# Вставка данных в ClickHouse

В этом модуле мы поговорим про вставку данных, а также про автоматизацию работы с ClickHouse. Начнем с операции `INSERT`, с помощью которой мы добавляем данные в таблицу.

## Способы вставки данных

### Способ 1: Прямая вставка

Создадим таблицу:

```sql
CREATE TABLE table1
(
    id UInt64,
    date Date,
    value UInt64
)
ENGINE = TinyLog;
INSERT INTO table1 (*) VALUES 
(0, '2020-01-01', 50), 
(1, '2020-01-01', 12), 
(2, '2020-01-01', 95), 
(3, '2020-01-02', 72), 
(4, '2020-01-02', 66), 
(5, '2020-01-02', 69), 
(6, '2020-01-03', 18), 
(7, '2020-01-03', 60), 
(8, '2020-01-03', 86);
```

Вставим данные: 
```sql
INSERT INTO table1 (*) VALUES (0, '2020-01-01', 50), 
(1, '2020-01-01',12), 
(2, '2020-01-01',95), 
(3, '2020-01-02',72), 
(4, '2020-01-02',66), 
(5, '2020-01-02',69), 
(6, '2020-01-03',18), 
(7, '2020-01-03',60), 
(8, '2020-01-03',86)
```

Указываем в какую таблицу, какие поля (* это все поля) и перечисляем данные которые хотим вставить. Все просто. Также можно указать ```(* EXCEPT(b))``` если вы хотите вставить во все поля кроме b

**Второй способ:**

Можно также вставлять данные через табличные функции, помните мы так делали, пример:
```sql
SELECT * 
FROM file('test.csv', 'CSV', '...схема данных...')
```

**Третий способ:**

Вставить данные из одной таблицы в другую, с помощью такой команды:

```sql
INSERT INTO table1 SELECT * FROM table2
```

**Четвертый способ:**

Аналогичен первому, однако допускается больший выбор в форматах которыми вы можете вставить данные. Например мы уже так делали со вставкой в формате JSON Таким образом мы можем передать JSON строку которая будет разобрана.
```sql
INSERT INTO sale(
    sale_date ,
    product_id ,
    product_category ,
    sale_amount ,
    sale_quantity ,
    customer_id ,
    store_id 
) FORMAT JSONEachRow
{"sale_date": "2020-01-28", "product_id": 61, "product_category": "pr3", "sale_amount": 31, "sale_quantity": 48, "customer_id": 79, "store_id": 49}
```